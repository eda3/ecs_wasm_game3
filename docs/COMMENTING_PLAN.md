# プロジェクト全体コメント追加計画書

## 1. 目的

このプロジェクトの Rust (`.rs`) ソースコード全体に、プログラミング初学者でもコードの意味を理解できるよう、詳細かつ平易な日本語コメントを追加します。

これにより、以下の効果を目指します。

*   新規参画者がプロジェクトのコードを理解しやすくなる。
*   将来、自身でコードを見返す際の理解を助ける。
*   コードの可読性を向上させ、メンテナンス性を高める。

## 2. 対象範囲

原則として、`src/`, `ecs_derive/src/`, `tests/`, `server/src/` ディレクトリ配下の `.rs` ファイル全てを対象とします。

ただし、自動生成されるファイルやバージョン管理下のファイル (`target/`, `.git/` 等) は対象外です。

## 3. コメントのスタイル

コメントは以下のスタイルで統一します。

*   **言語:** 日本語
*   **想定読者:** プログラミング初学者
*   **トーン:** 標準的で丁寧な言葉遣い
*   **絵文字:** 原則として使用しない (説明の補助として必要な場合は最小限に留める)
*   **内容:**
    *   変数、関数、構造体などの定義とその目的・役割
    *   主要な処理ブロックの目的とアルゴリズムの概要
    *   複雑なロジックや設計判断の根拠に関する補足説明
    *   `// TODO` コメントは、具体的なタスク内容が分かるように記述するか、可能であれば該当箇所を実装はしない。

## 4. 作業手順

コードベース全体へのコメント追加は段階的に実施するため、以下の順序でモジュールごとに作業を進めます。

1.  **`src/lib.rs`**: プロジェクトのエントリポイント。全体の構造を把握する。
2.  **`ecs_derive/src/lib.rs`**: カスタム派生マクロの実装。
3.  **`src/ecs/`**: ECSコア実装。
    *   `mod.rs`
    *   `entity.rs`
    *   `component.rs`
    *   `system.rs`
    *   `resource.rs`
    *   `query.rs`
    *   `macros.rs`
4.  **`src/rendering/`**: レンダリング関連モジュール。
    *   `mod.rs`
    *   `sprite.rs`
    *   `animation.rs`
    *   `camera.rs`
    *   `layer.rs`
5.  **`src/game/`**: ゲーム固有ロジック。(未実装箇所が多い点に留意)
    *   `mod.rs`
    *   `state.rs`
    *   `systems.rs`
    *   `entities.rs`
    *   `resources.rs`
    *   `input.rs`
    *   `physics.rs`
    *   `rendering.rs` (gameモジュール内)
    *   `cursor/` ディレクトリ内のファイル
    *   `state/` ディレクトリ内のファイル
6.  **`src/network/`**: ネットワーク関連モジュール。(複雑な実装を含む可能性あり)
    *   `mod.rs`
    *   `client.rs`
    *   `protocol.rs`
    *   `messages.rs`
    *   `sync.rs`
    *   `prediction.rs`
    *   `compression_system.rs`
    *   `network_status.rs`
    *   `server.rs`
    *   `reliability_system.rs`
    *   `bandwidth_control.rs`
    *   `latency_compensation.rs`
    *   `message_bandwidth_analyzer.rs`
7.  **`src/physics/`**: 物理演算関連モジュール。(存在する場合)
8.  **`src/input/`**: 入力処理関連モジュール。(存在する場合)
9.  **`src/utils/`**: ユーティリティ関連モジュール。(存在する場合)
10. **`tests/`**: テストコード。
11. **`server/src/`**: サーバー側実装。(存在する場合)

各ステップにおいて、対象モジュール内の `.rs` ファイルを一つずつ確認し、ファイル先頭から順にコメントを追加・修正します。

## 5. 注意事項

*   コメントの量が多くなることを許容する。初学者向けに、冗長であっても丁寧な説明を心がける。
*   既存のコメントが存在する場合も、スタイル統一のため必要に応じて修正・追記する。
*   作業中にコードの改善点や疑問点を発見した場合は、コメントとして記録する。(例: `// TODO: この実装はパフォーマンス上の問題がある可能性があるため、要調査。`)
*   一度に長時間の作業は避け、適度な休憩を挟みながら進める。

---

この計画書に基づき、コメント追加作業を進めます。 