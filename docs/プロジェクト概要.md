# プロジェクト概要

## プロジェクト目的

Rust と WebAssembly を使用した独自の Entity-Component-System (ECS) アーキテクチャによるマルチプレイヤーゲームを開発します。このプロジェクトでは、既存の ECS ゲームエンジンのクレートを使用せず、完全にカスタムの実装を行います。

## 技術スタック

### 言語とプラットフォーム
- **プログラミング言語**: Rust 🦀
- **コンパイルターゲット**: WebAssembly (Wasm) 🕸️
- **フロントエンド**: HTML5 + JavaScript (+ TypeScript オプション)
- **レンダリング**: Canvas API
- **ネットワーク**: WebSocket

### 主要な依存関係
- **wasm-bindgen**: Rust と JavaScript 間の相互運用
- **web-sys**: Web API へのアクセス
- **js-sys**: JavaScript 標準ライブラリへのアクセス
- **serde**: シリアライゼーション/デシリアライゼーション
- **rand**: 乱数生成（WebAssembly 互換）
- **uuid**: 一意な ID 生成
- **wasm-logger**: ロギング

## プロジェクトスコープ

### 含まれる機能
1. **独自 ECS アーキテクチャ**
   - エンティティ管理システム
   - コンポーネントストレージ
   - クエリシステム
   - システム実行スケジューラ

2. **グラフィックス**
   - 2D レンダリングシステム
   - スプライト/アニメーション管理
   - カメラシステム

3. **ユーザーインターフェース**
   - 入力処理（キーボード、マウス）
   - 基本的な UI コンポーネント
   - メニュー/HUD

4. **マルチプレイヤー**
   - WebSocket ベースの通信
   - エンティティ同期
   - クライアント側予測
   - 遅延補正

5. **ゲームプレイ**
   - 基本ゲームループ
   - 衝突検出
   - 物理シミュレーション（基本）

### 範囲外の機能
- 3D レンダリング
- 高度な物理シミュレーション
- AI システム（基本的なものを除く）
- アセット管理システム（最小限の実装のみ）
- エディタツール

## 目標と制約

### パフォーマンス目標
- **フレームレート**: 60 FPS 以上
- **ネットワーク更新**: 最小 20 Hz
- **メモリ使用量**: 100MB 未満
- **初期ロード時間**: 5 秒未満（最適化後）

### 技術的制約
- ブラウザの制限内での動作
- WebAssembly の制約内でのパフォーマンス最適化
- クロスブラウザ互換性（Chrome, Firefox, Safari, Edge）
- 低レイテンシ要件（特にマルチプレイヤー）

## プロジェクト構成

```
ecs_wasm_game/
├── Cargo.toml              # 依存関係とメタデータ
├── src/
│   ├── lib.rs              # エントリポイント
│   ├── ecs/                # 独自ECS実装
│   │   ├── mod.rs
│   │   ├── entity.rs       # エンティティ管理
│   │   ├── component.rs    # コンポーネント定義
│   │   ├── system.rs       # システム基盤
│   │   └── world.rs        # ワールド・リソース管理
│   ├── game/
│   │   ├── mod.rs
│   │   ├── state.rs        # ゲーム状態管理
│   │   └── resources.rs    # 共有リソース
│   ├── rendering/          # レンダリングシステム
│   ├── physics/            # 物理・衝突システム
│   ├── input/              # 入力処理
│   ├── network/            # ネットワーク通信
│   └── utils/              # ユーティリティ
└── www/                    # フロントエンド
    ├── index.html
    ├── index.js
    ├── webpack.config.js
    └── package.json
``` 